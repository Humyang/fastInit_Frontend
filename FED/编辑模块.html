<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="http://at.alicdn.com/t/font_248581_9l83ha8uurofxbt9.css">
    <link rel="stylesheet" href="../src/css/btn.css">
    <link rel="stylesheet" href="../src/css/editModule.css">
    <title>Template</title>
</head>
<body>
	<div class="floder">
        <a class="btn back_home">回到首页</a>
            <p class="p_add"><i class="i_add">+</i>新建文集</p>
            <div class="add_wrap">
                <input placeholder="输入文章标题" type="" name="">
                <a class="btn btn_ok" href="">保存</a>
                <a class="btn btn_cancel" href="">取消</a>
            </div>
            <p class="list_mode"><i class="iconfont icon-zhankai"></i><i class="iconfont icon-icon1460187848267"></i></p>
            <div class="list_mode_group">
                <p class="p1">文集排序方式</p>
                <select name="" id="">
                    <option value="">创建日期</option>
                    <option value="">最近使用</option>
                    <option value="">使用频率</option>
                </select>



            </div>
            <div class="list_mode_group">
                <p class="p1">搜索</p>
                <input class="search" type="text" placeholder="搜索文集和文章">
                <a class="btn btn_ok" href="">确定</a>
            </div>
            <ul class="item">
                <li class="active">脚本 <i class="iconfont icon-gengduo i1"></i></li>
                <li >日志</li>
                <li>数据库</li>
                <li>React</li>
                <li class="active editor">
                    <input type="" placeholder="前端布局" name="">
                    <a class="btn btn_ok" href="">保存</a>
                    <a class="btn btn_cancel" href="">取消</a>
                </li>
                <li>微信小程序</li>
                <li class="active">单元测试 <i class="iconfont icon-gengduo i1"></i>
                </li>

            </ul>
    </div>
    <!-- 代码编辑 -->
    <div class="editArea">
    	<p class="btn_wrap">
    		<a class="btn black" href="">写入</a>
    		<a class="btn black" href="">分割</a>
    	</p>
    	<div class="textarea_wrap">
    		<textarea name="" id="" cols="30" rows="10"></textarea>
    	</div>
    	<div id="codeBlock_wrap">
    		<div id="codeblock1" class="codeblock" draggable="true" >
    			def get_pid_close(port):
			    status,output = commands.getstatusoutput('lsof -i:'+str(port))
			    if status == 0:
			        res = output.split("\n")[1]
			        pid = re.findall(r'(\b[0-9]+)',res)
			        print pid[0]
			        close_api_serve_result,info = commands.getstatusoutput("kill -9 "+str(pid[0]))
			        print 'close_api_serve_result',close_api_serve_result
			        if close_api_serve_result == 0:
			            print "close process is :",pid[0]
			            return 1
			    return 0
			</div>
    	</div>
    </div>
    <!-- 模块分类 -->
    <div class="classify">
      <p class="btn_wrap">
        <a class="btn black" href="">添加文件</a>
      </p>
      <div class="add_wrap">
          <input placeholder="输入文章标题" type="" name="">
          <a class="btn btn_ok" href="">保存</a>
          <a class="btn btn_cancel" href="">取消</a>
      </div>
    	<div id="cell1" class="cell" ondrop="drop_handler(event);" ondragover="dragover_handler(event);">
    		<p class="head">package.json</p>
    		<code class="codeblock">
    			def get_pid_close(port):
			    status,output = commands.getstatusoutput('lsof -i:'+str(port))
			    if status == 0:
			        res = output.split("\n")[1]
			        pid = re.findall(r'(\b[0-9]+)',res)
			        print pid[0]
			        close_api_serve_result,info = commands.getstatusoutput("kill -9 "+str(pid[0]))
			        print 'close_api_serve_result',close_api_serve_result
			        if close_api_serve_result == 0:
			            print "close process is :",pid[0]
			            return 1
			    return 0
			</code>
			<code class="codeblock">
    			def get_pid_close(port):
			    status,output = commands.getstatusoutput('lsof -i:'+str(port))
			    if status == 0:
			        res = output.split("\n")[1]
			        pid = re.findall(r'(\b[0-9]+)',res)
			        print pid[0]
			        close_api_serve_result,info = commands.getstatusoutput("kill -9 "+str(pid[0]))
			        print 'close_api_serve_result',close_api_serve_result
			        if close_api_serve_result == 0:
			            print "close process is :",pid[0]
			            return 1
			    return 0
			</code>
    	</div>
    	
    </div>

    <script >
    	$(function(){
    		$("#codeBlock_wrap div").on("dragstart",dragstart_handler,)
    	})
function dragstart_handler(ev) {
 console.log("dragStart");
 // Change the source element's background color to signify drag has started
 ev.currentTarget.style.border = "dashed";
 // Add the id of the drag source element to the drag data payload so
 // it is available when the drop event is fired
 // must through originalEvent access dataTransfer when using jquery 
 ev.originalEvent.dataTransfer.setData("id", ev.target.id);
 ev.originalEvent.dataTransfer.setData("text/outerHTML",ev.target.outerHTML)
 // Tell the browser both copy and move are possible
 ev.effectAllowed = "copyMove";
}
function dragover_handler(ev) {
 console.log("dragOver");
 // Change the target element's border to signify a drag over event
 // has occurred
 ev.currentTarget.style.background = "lightblue";
 ev.preventDefault();
}
function drop_handler(ev) {
  console.log("Drop");
  ev.preventDefault();
  // Get the id of drag source element (that was added to the drag data
  // payload by the dragstart event handler)
  var id = ev.dataTransfer.getData("id");
  // Only Move the element if the source and destination ids are both "move"
  // if (id == "src_move" && ev.target.id == "dest_move")
    // ev.target.appendChild(document.getElementById(id));
  // Copy the element if the source and destination ids are both "copy"
  // if (id == "src_copy" && ev.target.id == "dest_copy") {
   // var nodeCopy = document.getElementById(id).cloneNode(true);
   var outerHTML = ev.dataTransfer.getData("text/outerHTML")
   // var newNode = 
   $(ev.currentTarget).append($(outerHTML))
   // nodeCopy.id = "newId";
   // ev.target.appendChild(nodeCopy);
  // }
}
function dragend_handler(ev) {
  console.log("dragEnd");
  // Restore source's border
  ev.target.style.border = "solid black";
  // Remove all of the drag data
  ev.dataTransfer.clearData();
}
    </script>
</body>
</html>